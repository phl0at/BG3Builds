import{b,d as m,j as e,N as k,x as z,y as I,r as j,z as S,P as A,A as y}from"./index-94c4d620.js";import{G as B,m as w,c as $,C as L,a as D,n as F,o as R,p as q}from"./index-7b44de64.js";const H="_main_17bqz_1",U="_loading_17bqz_10",O="_fadeIn_17bqz_1",P={main:H,loading:U,fadeIn:O},E="_main_1gt5k_1",G="_navButton_1gt5k_13",M="_toCreate_1gt5k_21",V="_body_1gt5k_27",T="_scroll_1gt5k_37",W="_buildsList_1gt5k_44",J="_noBuilds_1gt5k_56",K="_sorry_1gt5k_64",Q="_favorited_1gt5k_67",X="_build_1gt5k_44",Y="_select_1gt5k_87",Z="_buildName_1gt5k_105",ee="_buildClassList_1gt5k_116",se="_selectedBuild_1gt5k_123",te="_selectedHeader_1gt5k_135",ae="_favoriteContainer_1gt5k_142",ie="_favorite_1gt5k_67",le="_headerRight_1gt5k_155",ce="_selectedClassImg_1gt5k_158",ne="_selectedBody_1gt5k_169",de="_selectedName_1gt5k_183",re="_selectedAttributes_1gt5k_186",oe="_stat_1gt5k_191",_e="_selectedClasses_1gt5k_197",me="_selClass_1gt5k_205",ue="_listImage_1gt5k_212",he="_selectedCharacter_1gt5k_216",je="_char_1gt5k_224",ge="_toBuild_1gt5k_231",xe="_orange_1gt5k_243",ve="_hidden_1gt5k_257",Ce="_loading_1gt5k_261",Ne="_fadeIn_1gt5k_1",t={main:E,navButton:G,toCreate:M,body:V,scroll:T,buildsList:W,noBuilds:J,sorry:K,favorited:Q,build:X,select:Y,buildName:Z,buildClassList:ee,selectedBuild:se,selectedHeader:te,favoriteContainer:ae,favorite:ie,headerRight:le,selectedClassImg:ce,selectedBody:ne,selectedName:de,selectedAttributes:re,stat:oe,selectedClasses:_e,selClass:me,listImage:ue,selectedCharacter:he,char:je,toBuild:ge,orange:xe,hidden:ve,loading:Ce,fadeIn:Ne};function p(s){return B({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M923 283.6a260.04 260.04 0 0 0-56.9-82.8 264.4 264.4 0 0 0-84-55.5A265.34 265.34 0 0 0 679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 0 0-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"},child:[]}]})(s)}function ke(s){return B({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M923 283.6a260.04 260.04 0 0 0-56.9-82.8 264.4 264.4 0 0 0-84-55.5A265.34 265.34 0 0 0 679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 0 0-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"},child:[]}]})(s)}function fe({build:s}){const i=b(),c=m(l=>{var g;return(g=l.session.user)==null?void 0:g.favorites}),o=m(l=>l.static.races[s.race].name),r=m(l=>l.static.backgrounds[s.background].name),n=["Strength","Dexterity","Constitution","Intelligence","Wisdom","Charisma"],_=l=>{l.preventDefault(),c[s.id]?i(z(s.id)):i(I(s.id))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:t.selectedHeader,children:[e.jsx("div",{className:t.favoriteContainer,children:c&&e.jsx("button",{title:"Add to favorites",className:t.favorite,onClick:_,children:c[s.id]?e.jsx(p,{size:"40"}):e.jsx(ke,{size:"40"})})}),e.jsx("div",{className:t.selectedClassImg,children:s.build_classes.length>0&&e.jsx("img",{src:`https://ik.imagekit.io/phl0at/images/class_icons/${s.build_classes[0].name}.png`})}),e.jsx("div",{className:t.headerRight})]}),e.jsxs("div",{className:t.selectedBody,children:[e.jsx("div",{className:t.selectedName,children:s.name}),e.jsx("div",{className:t.selectedAttributes,children:n.map(l=>e.jsxs("div",{className:t.stat,children:[e.jsx("div",{className:t.orange,children:l.slice(0,3)}),e.jsx("div",{children:s[l.toLowerCase()]})]},l))}),e.jsx("div",{className:t.selectedClasses,children:s.build_classes.map(l=>e.jsxs("div",{className:t.selClass,children:[e.jsx("img",{title:l.name,className:t.listImage,src:`https://ik.imagekit.io/phl0at/images/class_icons/${l.name}.png`}),e.jsx("div",{children:l.level})]},l.class_id))}),e.jsxs("div",{className:t.selectedCharacter,children:[e.jsx("div",{className:t.char,children:s.character_name}),"|",e.jsx("div",{className:t.char,children:o}),"|",e.jsx("div",{className:t.char,children:r})]}),e.jsx(k,{title:"Go to build",className:t.toBuild,to:`/build/${s.id}`,children:e.jsx(w,{size:"50"})})]})]})}function be({filters:s,setFilters:i}){const[c,o]=j.useState(null),r=m(a=>a.builds[c]),n=m(a=>a.users),_=m(a=>a.session.user),l=m(a=>a.builds),g=Object.values(s).find(a=>a!=null),d=j.useMemo(()=>S(l,s,_),[l,s,_]);j.useEffect(()=>{if(!_){const a={...s};delete a.owned,delete a.favorites,i({...a})}},[_]);const N=(a,x)=>{a.preventDefault(),o(x)};return d.length<1&!g?e.jsx("main",{className:t.main,children:e.jsx("div",{className:t.scroll,children:e.jsx(A,{className:t.loading,color:"#e4c274",size:"20px"})})}):e.jsx("main",{className:t.main,children:e.jsxs("div",{className:t.body,children:[e.jsx("div",{className:t.scroll,children:e.jsxs("div",{className:t.buildsList,children:[d!=null&&d.map((a,x)=>{var h;return e.jsx("button",{onClick:v=>N(v,a.id),className:c===a.id?t.select:t.build,children:e.jsxs(e.Fragment,{children:[_&&_.favorites[a.id]?e.jsx(p,{className:t.favorited,size:"17"}):null,e.jsx("div",{className:t.buildName,children:a.name}),e.jsx("div",{className:t.owner,children:`Created By: ${(h=n[a.user_id])==null?void 0:h.username}`}),e.jsx("div",{className:t.buildComments,children:`Comments: ${Object.values(a.comments).length}`}),e.jsx("div",{className:t.buildClassList,children:Object.values(a.build_classes).map(v=>e.jsx("div",{className:t.buildClass,children:`| ${v.level} ${v.name}`},v.class_id))},x)]})},a.id)}),d.length<1&&e.jsxs("div",{className:t.noBuilds,children:[e.jsx("div",{className:t.sorry,children:"Sorry, adventurer!"}),e.jsxs("div",{className:t.message,children:["There are no builds matching the current filters",e.jsxs("div",{children:["Head over to the ",e.jsx(k,{to:"/create",children:"Create Build Page"})," to make one!"]})]})]})]})}),e.jsx("div",{className:c?t.selectedBuild:t.hidden,children:c&&e.jsx(e.Fragment,{children:e.jsx(fe,{build:r})})}),e.jsx("div",{className:t.navButton,children:e.jsx(k,{title:"Create build",className:t.toCreate,to:"/create",children:e.jsx($,{size:"50"})})})]})})}const Be="_main_zaj5i_1",pe="_title_zaj5i_17",ze="_filterContainer_zaj5i_28",Ie="_filter_zaj5i_28",Se="_list_zaj5i_51",Ae="_listItem_zaj5i_60",ye="_selected_zaj5i_63",we="_clear_zaj5i_70",u={main:Be,title:pe,filterContainer:ze,filter:Ie,list:Se,listItem:Ae,selected:ye,clear:we};function f({type:s,filters:i,setFilters:c}){const o=s[0].toUpperCase()+s.slice(1);return e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsxs("button",{className:u.filter,onClick:r=>{r.preventDefault(),c(n=>i[s]?{...n,[s]:null}:{...n,[s]:!0})},children:[i[s]?e.jsx(L,{size:"24"}):e.jsx(D,{size:"24"}),o]})})})}function C({type:s,selectedItem:i,setSelectedItem:c,filters:o,setFilters:r}){const[n,_]=j.useState(!1),l=s[0].toUpperCase()+s.slice(1),g=m(d=>d.static[s]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("button",{className:u.filter,onClick:d=>{d.preventDefault(),_(!n)},children:[n?e.jsx(F,{size:"24"}):e.jsx(R,{size:"24"}),l]})}),n&&e.jsx("div",{className:u.list,children:Object.values(g).map((d,N)=>{const a=d.class_id?"class_id":"id";return e.jsx("div",{children:e.jsx("button",{className:i[s]===d.name?u.selected:u.listItem,onClick:x=>{x.preventDefault(),r(h=>o[s]===d[a]?{...h,[s]:null}:{...h,[s]:d[a]}),c(h=>i[s]===d.name?{...h,[s]:null}:{...h,[s]:d.name})},children:d.name})},N)})})]})}function $e({filters:s,setFilters:i}){const c=m(n=>n.session.user),[o,r]=j.useState({});return e.jsxs("main",{className:u.main,children:[e.jsxs("div",{className:u.title,children:["Filters",Object.values(s).find(n=>n!=null)&&e.jsx("button",{className:u.clear,onClick:n=>{n.preventDefault(),i({}),r({})},children:e.jsx(q,{size:"30"})})]}),e.jsx("div",{className:u.filterContainer,children:e.jsxs("div",{children:[c&&e.jsxs(e.Fragment,{children:[e.jsx(f,{type:"owned",filters:s,setFilters:i}),e.jsx(f,{type:"favorites",filters:s,setFilters:i})]}),e.jsx(C,{type:"origins",selectedItem:o,setSelectedItem:r,filters:s,setFilters:i},1),e.jsx(C,{type:"races",selectedItem:o,setSelectedItem:r,filters:s,setFilters:i},2),e.jsx(C,{type:"backgrounds",selectedItem:o,setSelectedItem:r,filters:s,setFilters:i},3),e.jsx(C,{type:"classes",selectedItem:o,setSelectedItem:r,filters:s,setFilters:i},4)]})})]})}function Fe(){const s=b(),[i,c]=j.useState({});return j.useEffect(()=>{s(y())},[s]),e.jsxs("main",{className:P.main,children:[e.jsx($e,{filters:i,setFilters:c}),e.jsx(be,{filters:i,setFilters:c})]})}export{Fe as default};
