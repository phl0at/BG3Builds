import{a as k,b as u,j as e,N as f,s as p,v as I,r as x,w as z,P as S,x as w}from"./index-c2532f7c.js";import{G as b,m as $,e as A,C as F,a as L,n as D,o as y,p as R}from"./index-97aa2535.js";const q="_main_17bqz_1",H="_loading_17bqz_10",O="_fadeIn_17bqz_1",U={main:q,loading:H,fadeIn:O},P="_main_1gt5k_1",E="_navButton_1gt5k_13",G="_toCreate_1gt5k_21",M="_body_1gt5k_27",V="_scroll_1gt5k_37",T="_buildsList_1gt5k_44",W="_noBuilds_1gt5k_56",J="_sorry_1gt5k_64",K="_favorited_1gt5k_67",Q="_build_1gt5k_44",X="_select_1gt5k_87",Y="_buildName_1gt5k_105",Z="_buildClassList_1gt5k_116",ee="_selectedBuild_1gt5k_123",se="_selectedHeader_1gt5k_135",te="_favoriteContainer_1gt5k_142",ae="_favorite_1gt5k_67",ie="_headerRight_1gt5k_155",le="_selectedClassImg_1gt5k_158",ce="_selectedBody_1gt5k_169",ne="_selectedName_1gt5k_183",de="_selectedAttributes_1gt5k_186",re="_stat_1gt5k_191",oe="_selectedClasses_1gt5k_197",_e="_selClass_1gt5k_205",me="_listImage_1gt5k_212",ue="_selectedCharacter_1gt5k_216",he="_char_1gt5k_224",xe="_toBuild_1gt5k_231",ge="_orange_1gt5k_243",ve="_hidden_1gt5k_257",je="_loading_1gt5k_261",Ce="_fadeIn_1gt5k_1",t={main:P,navButton:E,toCreate:G,body:M,scroll:V,buildsList:T,noBuilds:W,sorry:J,favorited:K,build:Q,select:X,buildName:Y,buildClassList:Z,selectedBuild:ee,selectedHeader:se,favoriteContainer:te,favorite:ae,headerRight:ie,selectedClassImg:le,selectedBody:ce,selectedName:ne,selectedAttributes:de,stat:re,selectedClasses:oe,selClass:_e,listImage:me,selectedCharacter:ue,char:he,toBuild:xe,orange:ge,hidden:ve,loading:je,fadeIn:Ce};function B(s){return b({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M923 283.6a260.04 260.04 0 0 0-56.9-82.8 264.4 264.4 0 0 0-84-55.5A265.34 265.34 0 0 0 679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 0 0-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"},child:[]}]})(s)}function fe(s){return b({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M923 283.6a260.04 260.04 0 0 0-56.9-82.8 264.4 264.4 0 0 0-84-55.5A265.34 265.34 0 0 0 679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 0 0-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"},child:[]}]})(s)}function Ne({build:s}){const l=k(),n=u(i=>{var g;return(g=i.session.user)==null?void 0:g.favorites}),m=u(i=>i.static.races[s.race].name),o=u(i=>i.static.backgrounds[s.background].name),r=["Strength","Dexterity","Constitution","Intelligence","Wisdom","Charisma"],c=i=>{i.preventDefault(),n[s.id]?l(p(s.id)):l(I(s.id))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:t.selectedHeader,children:[e.jsx("div",{className:t.favoriteContainer,children:n&&e.jsx("button",{title:"Add to favorites",className:t.favorite,onClick:c,children:n[s.id]?e.jsx(B,{size:"40"}):e.jsx(fe,{size:"40"})})}),e.jsx("div",{className:t.selectedClassImg,children:s.build_classes.length>0&&e.jsx("img",{src:`https://ik.imagekit.io/phl0at/images/class_icons/${s.build_classes[0].name}.png`})}),e.jsx("div",{className:t.headerRight})]}),e.jsxs("div",{className:t.selectedBody,children:[e.jsx("div",{className:t.selectedName,children:s.name}),e.jsx("div",{className:t.selectedAttributes,children:r.map(i=>e.jsxs("div",{className:t.stat,children:[e.jsx("div",{className:t.orange,children:i.slice(0,3)}),e.jsx("div",{children:s[i.toLowerCase()]})]},i))}),e.jsx("div",{className:t.selectedClasses,children:s.build_classes.map(i=>e.jsxs("div",{className:t.selClass,children:[e.jsx("img",{title:i.name,className:t.listImage,src:`https://ik.imagekit.io/phl0at/images/class_icons/${i.name}.png`}),e.jsx("div",{children:i.level})]},i.class_id))}),e.jsxs("div",{className:t.selectedCharacter,children:[e.jsx("div",{className:t.char,children:s.character_name}),"|",e.jsx("div",{className:t.char,children:m}),"|",e.jsx("div",{className:t.char,children:o})]}),e.jsx(f,{title:"Go to build",className:t.toBuild,to:`/build/${s.id}`,children:e.jsx($,{size:"50"})})]})]})}function ke({filters:s,setFilters:l}){const[n,m]=x.useState(null),o=u(a=>a.builds[n]),r=u(a=>a.users),c=u(a=>a.session.user),i=u(a=>a.builds),g=Object.values(s).find(a=>a!=null),d=x.useMemo(()=>z(i,s,c),[i,s,c]);x.useEffect(()=>{if(!c){const a={...s};delete a.owned,delete a.favorites,l({...a})}},[c]);const C=(a,v)=>{a.preventDefault(),m(v)};return d.length<1&!g?e.jsx("main",{className:t.main,children:e.jsx("div",{className:t.scroll,children:e.jsx(S,{className:t.loading,color:"#e4c274",size:"20px"})})}):e.jsx("main",{className:t.main,children:e.jsxs("div",{className:t.body,children:[e.jsx("div",{className:t.scroll,children:e.jsxs("div",{className:t.buildsList,children:[d!=null&&d.map((a,v)=>{var h;return e.jsx("button",{onClick:j=>C(j,a.id),className:n===a.id?t.select:t.build,children:e.jsxs(e.Fragment,{children:[c&&c.favorites[a.id]?e.jsx(B,{className:t.favorited,size:"17"}):null,e.jsx("div",{className:t.buildName,children:a.name}),e.jsx("div",{className:t.owner,children:`Created By: ${(h=r[a.user_id])==null?void 0:h.username}`}),e.jsx("div",{className:t.buildComments,children:`Comments: ${Object.values(a.comments).length}`}),e.jsx("div",{className:t.buildClassList,children:Object.values(a.build_classes).map(j=>e.jsx("div",{className:t.buildClass,children:`| ${j.level} ${j.name}`},j.class_id))},v)]})},a.id)}),d.length<1&&e.jsxs("div",{className:t.noBuilds,children:[e.jsx("div",{className:t.sorry,children:"Sorry, adventurer!"}),e.jsxs("div",{className:t.message,children:["There are no builds matching the current filters",e.jsxs("div",{children:["Head over to the ",e.jsx(f,{to:"/create",children:"Create Build Page"})," to make one!"]})]})]})]})}),e.jsx("div",{className:n?t.selectedBuild:t.hidden,children:n&&e.jsx(e.Fragment,{children:e.jsx(Ne,{build:o})})}),e.jsx("div",{className:t.navButton,children:e.jsx(f,{title:"Create build",className:t.toCreate,to:"/create",children:e.jsx(A,{size:"50"})})})]})})}const be="_main_1cttx_1",Be="_title_1cttx_16",pe="_filterContainer_1cttx_27",Ie="_filter_1cttx_27",ze="_hidden_1cttx_49",Se="_list_1cttx_62",we="_listItem_1cttx_75",$e="_selected_1cttx_78",Ae="_clear_1cttx_85",_={main:be,title:Be,filterContainer:pe,filter:Ie,hidden:ze,list:Se,listItem:we,selected:$e,clear:Ae};function N({type:s,filters:l,setFilters:n}){const m=s[0].toUpperCase()+s.slice(1);return e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsxs("button",{className:_.filter,onClick:o=>{o.preventDefault(),n(r=>l[s]?{...r,[s]:null}:{...r,[s]:!0})},children:[l[s]?e.jsx(F,{size:"24"}):e.jsx(L,{size:"24"}),m]})})})}function Fe({type:s,selectedItem:l,setSelectedItem:n,filters:m,setFilters:o}){const[r,c]=x.useState(!1),i=s[0].toUpperCase()+s.slice(1),g=u(d=>d.static[s]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("button",{className:_.filter,onClick:d=>{d.preventDefault(),c(!r)},children:[r?e.jsx(D,{size:"24"}):e.jsx(y,{size:"24"}),i]})}),e.jsx("div",{className:r?_.list:_.hidden,children:Object.values(g).map((d,C)=>{const a=d.class_id?"class_id":"id";return e.jsx("div",{children:e.jsx("button",{className:l[s]===d.name?_.selected:_.listItem,onClick:v=>{v.preventDefault(),o(h=>m[s]===d[a]?{...h,[s]:null}:{...h,[s]:d[a]}),n(h=>l[s]===d.name?{...h,[s]:null}:{...h,[s]:d.name})},children:d.name})},C)})})]})}function Le({filters:s,setFilters:l}){const n=u(c=>c.session.user),[m,o]=x.useState({}),r=["origins","races","backgrounds","classes"];return e.jsxs("main",{className:_.main,children:[e.jsxs("div",{className:_.title,children:["Filters",Object.values(s).find(c=>c!=null)&&e.jsx("button",{className:_.clear,onClick:c=>{c.preventDefault(),l({}),o({})},children:e.jsx(R,{size:"30"})})]}),e.jsx("div",{className:_.filterContainer,children:e.jsxs("div",{children:[n&&e.jsxs(e.Fragment,{children:[e.jsx(N,{type:"owned",filters:s,setFilters:l}),e.jsx(N,{type:"favorites",filters:s,setFilters:l})]}),r.map((c,i)=>e.jsx(Fe,{type:c,selectedItem:m,setSelectedItem:o,filters:s,setFilters:l},i))]})})]})}function Re(){const s=k(),[l,n]=x.useState({});return x.useEffect(()=>{s(w())},[s]),e.jsxs("main",{className:U.main,children:[e.jsx(Le,{filters:l,setFilters:n}),e.jsx(ke,{filters:l,setFilters:n})]})}export{Re as default};
