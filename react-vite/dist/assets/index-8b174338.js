import{a as k,b as u,j as e,A as b,s as B,N,v as p,w as I,r as x,x as S,P as z,y as $}from"./index-f14e40f4.js";import{m as F,e as w,C as A,a as L,n as D,o as y,p as R}from"./index-01a8d099.js";const q="_main_17bqz_1",H="_loading_17bqz_10",O="_fadeIn_17bqz_1",U={main:q,loading:H,fadeIn:O},P="_main_1gt5k_1",E="_navButton_1gt5k_13",V="_toCreate_1gt5k_21",G="_body_1gt5k_27",M="_scroll_1gt5k_37",T="_buildsList_1gt5k_44",W="_noBuilds_1gt5k_56",J="_sorry_1gt5k_64",K="_favorited_1gt5k_67",Q="_build_1gt5k_44",X="_select_1gt5k_87",Y="_buildName_1gt5k_105",Z="_buildClassList_1gt5k_116",ee="_selectedBuild_1gt5k_123",se="_selectedHeader_1gt5k_135",te="_favoriteContainer_1gt5k_142",ae="_favorite_1gt5k_67",ie="_headerRight_1gt5k_155",le="_selectedClassImg_1gt5k_158",ne="_selectedBody_1gt5k_169",ce="_selectedName_1gt5k_183",de="_selectedAttributes_1gt5k_186",re="_stat_1gt5k_191",oe="_selectedClasses_1gt5k_197",_e="_selClass_1gt5k_205",me="_listImage_1gt5k_212",ue="_selectedCharacter_1gt5k_216",he="_char_1gt5k_224",xe="_toBuild_1gt5k_231",ge="_orange_1gt5k_243",je="_hidden_1gt5k_257",ve="_loading_1gt5k_261",Ce="_fadeIn_1gt5k_1",t={main:P,navButton:E,toCreate:V,body:G,scroll:M,buildsList:T,noBuilds:W,sorry:J,favorited:K,build:Q,select:X,buildName:Y,buildClassList:Z,selectedBuild:ee,selectedHeader:se,favoriteContainer:te,favorite:ae,headerRight:ie,selectedClassImg:le,selectedBody:ne,selectedName:ce,selectedAttributes:de,stat:re,selectedClasses:oe,selClass:_e,listImage:me,selectedCharacter:ue,char:he,toBuild:xe,orange:ge,hidden:je,loading:ve,fadeIn:Ce};function Ne({build:s}){const l=k(),c=u(i=>{var g;return(g=i.session.user)==null?void 0:g.favorites}),m=u(i=>i.static.races[s.race].name),o=u(i=>i.static.backgrounds[s.background].name),r=["Strength","Dexterity","Constitution","Intelligence","Wisdom","Charisma"],n=i=>{i.preventDefault(),c[s.id]?l(p(s.id)):l(I(s.id))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:t.selectedHeader,children:[e.jsx("div",{className:t.favoriteContainer,children:c&&e.jsx("button",{title:"Add to favorites",className:t.favorite,onClick:n,children:c[s.id]?e.jsx(b,{size:"40"}):e.jsx(B,{size:"40"})})}),e.jsx("div",{className:t.selectedClassImg,children:s.build_classes.length>0&&e.jsx("img",{src:`https://ik.imagekit.io/phl0at/images/class_icons/${s.build_classes[0].name}.png`})}),e.jsx("div",{className:t.headerRight})]}),e.jsxs("div",{className:t.selectedBody,children:[e.jsx("div",{className:t.selectedName,children:s.name}),e.jsx("div",{className:t.selectedAttributes,children:r.map(i=>e.jsxs("div",{className:t.stat,children:[e.jsx("div",{className:t.orange,children:i.slice(0,3)}),e.jsx("div",{children:s[i.toLowerCase()]})]},i))}),e.jsx("div",{className:t.selectedClasses,children:s.build_classes.map(i=>e.jsxs("div",{className:t.selClass,children:[e.jsx("img",{title:i.name,className:t.listImage,src:`https://ik.imagekit.io/phl0at/images/class_icons/${i.name}.png`}),e.jsx("div",{children:i.level})]},i.class_id))}),e.jsxs("div",{className:t.selectedCharacter,children:[e.jsx("div",{className:t.char,children:s.character_name}),"|",e.jsx("div",{className:t.char,children:m}),"|",e.jsx("div",{className:t.char,children:o})]}),e.jsx(N,{title:"Go to build",className:t.toBuild,to:`/build/${s.id}`,children:e.jsx(F,{size:"50"})})]})]})}function fe({filters:s,setFilters:l}){const[c,m]=x.useState(null),o=u(a=>a.builds[c]),r=u(a=>a.users),n=u(a=>a.session.user),i=u(a=>a.builds),g=Object.values(s).find(a=>a!=null),d=x.useMemo(()=>S(i,s,n),[i,s,n]);x.useEffect(()=>{if(!n){const a={...s};delete a.owned,delete a.favorites,l({...a})}},[n]);const C=(a,j)=>{a.preventDefault(),m(j)};return d.length<1&!g?e.jsx("main",{className:t.main,children:e.jsx("div",{className:t.scroll,children:e.jsx(z,{className:t.loading,color:"#e4c274",size:"20px"})})}):e.jsx("main",{className:t.main,children:e.jsxs("div",{className:t.body,children:[e.jsx("div",{className:t.scroll,children:e.jsxs("div",{className:t.buildsList,children:[d!=null&&d.map((a,j)=>{var h;return e.jsx("button",{onClick:v=>C(v,a.id),className:c===a.id?t.select:t.build,children:e.jsxs(e.Fragment,{children:[n&&n.favorites[a.id]?e.jsx(b,{className:t.favorited,size:"17"}):null,e.jsx("div",{className:t.buildName,children:a.name}),e.jsx("div",{className:t.owner,children:`Created By: ${(h=r[a.user_id])==null?void 0:h.username}`}),e.jsx("div",{className:t.buildComments,children:`Comments: ${Object.values(a.comments).length}`}),e.jsx("div",{className:t.buildClassList,children:Object.values(a.build_classes).map(v=>e.jsx("div",{className:t.buildClass,children:`| ${v.level} ${v.name}`},v.class_id))},j)]})},a.id)}),d.length<1&&e.jsxs("div",{className:t.noBuilds,children:[e.jsx("div",{className:t.sorry,children:"Sorry, adventurer!"}),e.jsxs("div",{className:t.message,children:["There are no builds matching the current filters",e.jsxs("div",{children:["Head over to the ",e.jsx(N,{to:"/create",children:"Create Build Page"})," to make one!"]})]})]})]})}),e.jsx("div",{className:c?t.selectedBuild:t.hidden,children:c&&e.jsx(e.Fragment,{children:e.jsx(Ne,{build:o})})}),e.jsx("div",{className:t.navButton,children:e.jsx(N,{title:"Create build",className:t.toCreate,to:"/create",children:e.jsx(w,{size:"50"})})})]})})}const ke="_main_1cttx_1",be="_title_1cttx_16",Be="_filterContainer_1cttx_27",pe="_filter_1cttx_27",Ie="_hidden_1cttx_49",Se="_list_1cttx_62",ze="_listItem_1cttx_75",$e="_selected_1cttx_78",Fe="_clear_1cttx_85",_={main:ke,title:be,filterContainer:Be,filter:pe,hidden:Ie,list:Se,listItem:ze,selected:$e,clear:Fe};function f({type:s,filters:l,setFilters:c}){const m=s[0].toUpperCase()+s.slice(1);return e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsxs("button",{className:_.filter,onClick:o=>{o.preventDefault(),c(r=>l[s]?{...r,[s]:null}:{...r,[s]:!0})},children:[l[s]?e.jsx(A,{size:"24"}):e.jsx(L,{size:"24"}),m]})})})}function we({type:s,selectedItem:l,setSelectedItem:c,filters:m,setFilters:o}){const[r,n]=x.useState(!1),i=s[0].toUpperCase()+s.slice(1),g=u(d=>d.static[s]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("button",{className:_.filter,onClick:d=>{d.preventDefault(),n(!r)},children:[r?e.jsx(D,{size:"24"}):e.jsx(y,{size:"24"}),i]})}),e.jsx("div",{className:r?_.list:_.hidden,children:Object.values(g).map((d,C)=>{const a=d.class_id?"class_id":"id";return e.jsx("div",{children:e.jsx("button",{className:l[s]===d.name?_.selected:_.listItem,onClick:j=>{j.preventDefault(),o(h=>m[s]===d[a]?{...h,[s]:null}:{...h,[s]:d[a]}),c(h=>l[s]===d.name?{...h,[s]:null}:{...h,[s]:d.name})},children:d.name})},C)})})]})}function Ae({filters:s,setFilters:l}){const c=u(n=>n.session.user),[m,o]=x.useState({}),r=["origins","races","backgrounds","classes"];return e.jsxs("main",{className:_.main,children:[e.jsxs("div",{className:_.title,children:["Filters",Object.values(s).find(n=>n!=null)&&e.jsx("button",{className:_.clear,onClick:n=>{n.preventDefault(),l({}),o({})},children:e.jsx(R,{size:"30"})})]}),e.jsx("div",{className:_.filterContainer,children:e.jsxs("div",{children:[c&&e.jsxs(e.Fragment,{children:[e.jsx(f,{type:"owned",filters:s,setFilters:l}),e.jsx(f,{type:"favorites",filters:s,setFilters:l})]}),r.map((n,i)=>e.jsx(we,{type:n,selectedItem:m,setSelectedItem:o,filters:s,setFilters:l},i))]})})]})}function ye(){const s=k(),[l,c]=x.useState({});return x.useEffect(()=>{s($())},[s]),e.jsxs("main",{className:U.main,children:[e.jsx(Ae,{filters:l,setFilters:c}),e.jsx(fe,{filters:l,setFilters:c})]})}export{ye as default};
